(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),o=a.n(i),c=a(11),l=a(47),s=a.n(l),u=a(64),m=a(65),d=a.n(m),p=a(48),f=a.n(p),h=a(105),g=a(137),E=a(155),v=a(138),T=a(139),w=a(37),b=a(133),y=Object(b.a)((function(e){return{secondary:{marginRight:80}}}));function k(e){return"BUS"===e?"bus-alt":"TRAM"===e?"subway":"TRAIN"===e?"train":void 0}var N=function(e){var t,a,n=e.departure,i=e.timeToWalk,o=y();return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(E.a,{style:{backgroundColor:(a=n.TransportMode,"BUS"===a?"#b22222":"TRAM"===a?"#4169e1":"TRAIN"===a?"yellow":void 0)}},r.a.createElement("i",{className:"fad fa-"+k(n.TransportMode)}))),r.a.createElement(v.a,{classes:{secondary:o.secondary},primary:n.LineNumber,secondary:n.Destination}),r.a.createElement(T.a,null,r.a.createElement(w.a,{variant:"body1"},r.a.createElement("b",null,0===(t=n.MinutesToDeparture-i)?"G\xe5 nu!":"G\xe5 om "+t+" min"))))},W=a(140),I=Object(b.a)((function(e){return{root:{marginBottom:e.spacing(2)}}}));var C=function(e){var t=I(),a=e.showDestination,n=e.showCantCatch,i=e.list,o=e.timeToWalk,c=i.map((function(e){return e.MinutesToDeparture=function(e){if(function(e){return e.includes(":")}(e)){var t=f()(e,"HH:mm"),a=f()();return t.diff(a,"minutes")}return function(e){return"Nu"===e}(e)?0:e.split(" ")[0]}(e.DisplayTime),e})),l=(n?c:c.filter((function(e){return function(e,t){return!!isNaN(t)||e.MinutesToDeparture-t>=0}(e,o)}))).sort((function(e,t){return e.MinutesToDeparture-t.MinutesToDeparture}));return r.a.createElement(W.a,{className:t.root},l.map((function(e,t){return r.a.createElement(N,{timeToWalk:o,key:t,departure:e,showDestination:a})})))},j=(a(103),a(141)),O=Object(b.a)((function(e){return{root:{margin:e.spacing(1),minWidth:"240px"}}}));var x=function(e){var t=O();return r.a.createElement(j.a,{className:t.root},e.children)},S={sites:[{name:"Ekuddsv\xe4gen",siteId:4042,timeToWalk:10},{name:"Finntorp",siteId:4046,timeToWalk:15},{name:"Saltsj\xf6-J\xe4rla",siteId:9429,timeToWalk:15}]},D=window.localStorage,R=function(e,t){return D.setItem(e,JSON.stringify(t))},M=function(e){var t=D.getItem(e);return null===t?(R(e,S[e]),S[e]):JSON.parse(t)},J=a(151),A=a(153),B=a(144),F=Object(b.a)((function(e){return{box:{padding:e.spacing(2)},textField:{width:145,margin:"8px 0"}}}));var z=function(e){var t=F(),a=e.handleSetTimeToWalk,n=e.timeToWalk,i=e.site;return r.a.createElement(J.a,{className:t.box,component:"div"},r.a.createElement(w.a,{variant:"h4"},i.name),r.a.createElement(A.a,{className:t.textField,InputProps:{startAdornment:r.a.createElement(B.a,{position:"start"},r.a.createElement("i",{className:"fas fa-walking"})),endAdornment:r.a.createElement(B.a,{position:"end"},"minuter"),inputProps:{step:"1",pattern:"d+\\"}},type:"number",label:"Tid att g\xe5",id:"timeToWalk"+i.siteId,value:n,variant:"outlined",size:"small",onChange:function(e){return a(e.target.value)}}))},G=Object(b.a)((function(e){return{listTitle:{padding:"0 "+e.spacing(2)+"px"}}}));function L(e){if(["821"].includes(e.LineNumber)){if(1===e.JourneyDirection)return 2;if(2===e.JourneyDirection)return 1}return e.JourneyDirection}var H=function(e){var t=G(),a=e.site,i=e.timeWindow,o=e.showCantCatch,l=Object(n.useState)({Buses:[],Trams:[]}),m=Object(c.a)(l,2),p=m[0],f=m[1],h=Object(n.useState)(a.timeToWalk),g=Object(c.a)(h,2),E=g[0],v=g[1],T="https://sl-api-wrapper.herokuapp.com/";Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(T+"nextDeparture/"+a.siteId+"?timewindow="+i);case 2:t=e.sent,f(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a.siteId,i]);var b=p.Buses.concat(p.Trams);return r.a.createElement(x,null,r.a.createElement("div",{className:"RealtimeResult"},r.a.createElement(z,{site:a,handleSetTimeToWalk:function(e){var t=parseInt(e,10),n=t<0||isNaN(t)?0:t;v(n),function(e,t){var a=M("sites").map((function(a){return t===a.siteId?(a.timeToWalk=e,a):a}));R("sites",a)}(n,a.siteId)},timeToWalk:E}),r.a.createElement(w.a,{className:t.listTitle,variant:"h6"},"Mot stan"),r.a.createElement(C,{showCantCatch:o,timeToWalk:E,list:b.filter((function(e){return 2===L(e)}))}),r.a.createElement(w.a,{className:t.listTitle,variant:"h6"},"Mot Nacka"),r.a.createElement(C,{showCantCatch:o,timeToWalk:E,list:b.filter((function(e){return 1===L(e)}))})))},P=a(148),U=a(154),V=a(145),$=a(146),q=a(152),K=a(147),Q=a(157),X=Object(b.a)((function(e){return{root:{width:"100%"},listItem:{paddingLeft:0,paddingRight:0},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},headingIcon:{fontSize:e.typography.pxToRem(16),marginRight:e.spacing(1)}}}));var Y=function(e){var t=e.timeWindow,a=e.setTimeWindow,n=e.showCantCatch,i=e.setShowCantCatch,o=X();return r.a.createElement(x,null,r.a.createElement(U.a,null,r.a.createElement(V.a,{expandIcon:r.a.createElement("i",{className:"fad fa-chevron-down"}),"aria-controls":"settings-content",id:"settings-header"},r.a.createElement(w.a,{className:o.heading},r.a.createElement("i",{className:"fad fa-cog "+o.headingIcon}),"Inst\xe4llningar")),r.a.createElement($.a,null,r.a.createElement(W.a,{className:o.root},r.a.createElement(h.a,{className:o.listItem},r.a.createElement(v.a,{secondary:"Visa avg\xe5ngar inom:"}),r.a.createElement(T.a,null,r.a.createElement(q.a,{value:t,onChange:function(e){return a(e.target.value)}},r.a.createElement(K.a,{value:"30"},"30 minuter"),r.a.createElement(K.a,{value:"60"},"60 minuter")))),r.a.createElement(h.a,{className:o.listItem},r.a.createElement(v.a,{secondary:"Visa avg\xe5ngar jag inte hinner till:"}),r.a.createElement(T.a,null,r.a.createElement(Q.a,{edge:"end",color:"primary",checked:n,onChange:function(e){return i(e.target.checked)}})))))))};var Z=function(){var e=Object(n.useState)(30),t=Object(c.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(!1),l=Object(c.a)(o,2),s=l[0],u=l[1];return r.a.createElement(P.a,{container:!0,spacing:0},r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(Y,{timeWindow:a,setTimeWindow:i,setShowCantCatch:u})),M("sites").map((function(e,t){return r.a.createElement(P.a,{key:t,item:!0,xs:12,md:"auto"},r.a.createElement(H,{showCantCatch:s,site:e,timeWindow:a}))})))},_=a(149),ee=a(150);var te=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null),r.a.createElement("div",{className:"App"},r.a.createElement(ee.a,{maxWidth:"lg",disableGutters:!0},r.a.createElement(Z,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t,a){e.exports=a(104)}},[[76,1,2]]]);
//# sourceMappingURL=main.f7cad8a5.chunk.js.map