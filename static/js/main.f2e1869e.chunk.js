(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n.n(i),c=n(11),l=n(47),s=n.n(l),u=n(64),m=n(65),d=n.n(m),f=n(48),p=n.n(f),h=n(104),g=n(136),v=n(154),E=n(137),w=n(138),T=n(37),b=n(132),k=Object(b.a)((function(e){return{secondary:{marginRight:80}}}));function y(e){return"BUS"===e?"bus-alt":"TRAM"===e?"subway":"TRAIN"===e?"train":void 0}var W=function(e){var t,n,a=e.departure,i=e.timeToWalk,o=k();return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(v.a,{style:{backgroundColor:(n=a.TransportMode,"BUS"===n?"#b22222":"TRAM"===n?"#4169e1":"TRAIN"===n?"yellow":void 0)}},r.a.createElement("i",{className:"fad fa-"+y(a.TransportMode)}))),r.a.createElement(E.a,{classes:{secondary:o.secondary},primary:a.LineNumber,secondary:a.Destination}),r.a.createElement(w.a,null,r.a.createElement(T.a,{variant:"body1"},r.a.createElement("b",null,0===(t=a.MinutesToDeparture-i)?"G\xe5 nu!":"G\xe5 om "+t+" min"))))},N=n(139),C=Object(b.a)((function(e){return{root:{marginBottom:e.spacing(2)}}}));var I=function(e){var t=C(),n=e.showCantCatch,a=e.list,i=e.timeToWalk,o=a.map((function(e){return e.MinutesToDeparture=function(e){if(function(e){return e.includes(":")}(e)){var t=p()(e,"HH:mm"),n=p()();return t.diff(n,"minutes")}return function(e){return"Nu"===e}(e)?0:parseInt(e.split(" ")[0],10)}(e.DisplayTime),e})),c=(n?o:o.filter((function(e){return function(e,t){return!!isNaN(t)||e.MinutesToDeparture-t>=0}(e,i)}))).sort((function(e,t){return e.MinutesToDeparture-t.MinutesToDeparture}));return r.a.createElement(N.a,{className:t.root},c.map((function(e,t){return r.a.createElement(W,{timeToWalk:i,key:t,departure:e})})))},j=n(140),S=Object(b.a)((function(e){return{root:{margin:e.spacing(1),minWidth:"240px"}}})),O=function(e){var t=e.children,n=S();return r.a.createElement(j.a,{className:n.root},t)},x={sites:[{name:"Ekuddsv\xe4gen",siteId:4042,timeToWalk:10},{name:"Finntorp",siteId:4046,timeToWalk:15},{name:"Saltsj\xf6-J\xe4rla",siteId:9429,timeToWalk:15}]},R=window.localStorage,A=function(e,t){return R.setItem(e,JSON.stringify(t))},D=function(){return function(e){var t=R.getItem(e);return null===t?(A(e,x[e]),x[e]):JSON.parse(t)}("sites")},M=n(150),J=n(152),B=n(143),L=Object(b.a)((function(e){return{box:{padding:e.spacing(2)},textField:{width:145,margin:"8px 0"}}})),U=function(e){var t=L(),n=e.handleSetTimeToWalk,a=e.timeToWalk,i=e.site;return r.a.createElement(M.a,{className:t.box,component:"div"},r.a.createElement(T.a,{variant:"h4"},i.name),r.a.createElement(J.a,{className:t.textField,InputProps:{startAdornment:r.a.createElement(B.a,{position:"start"},r.a.createElement("i",{className:"fas fa-walking"})),endAdornment:r.a.createElement(B.a,{position:"end"},"minuter"),inputProps:{step:"1",pattern:"d+\\"}},type:"number",label:"Tid att g\xe5",id:"timeToWalk"+i.siteId,value:a,variant:"outlined",size:"small",onChange:function(e){return n(e.target.value)}}))},F=Object(b.a)((function(e){return{listTitle:{padding:"0 "+e.spacing(2)+"px"}}}));function P(e){if(["821"].includes(e.LineNumber)){if(1===e.JourneyDirection)return 2;if(2===e.JourneyDirection)return 1}return e.JourneyDirection}var z=function(e){var t=F(),n=e.site,i=e.timeWindow,o=e.showCantCatch,l=Object(a.useState)({Buses:[],Trams:[]}),m=Object(c.a)(l,2),f=m[0],p=m[1],h=Object(a.useState)(n.timeToWalk),g=Object(c.a)(h,2),v=g[0],E=g[1],w="https://sl-api-wrapper.herokuapp.com/";Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(w+"nextDeparture/"+n.siteId+"?timewindow="+i);case 2:t=e.sent,p(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n.siteId,i]);var b=f.Buses.concat(f.Trams);return r.a.createElement(O,null,r.a.createElement("div",{className:"RealtimeResult"},r.a.createElement(U,{site:n,handleSetTimeToWalk:function(e){var t=parseInt(e,10),a=t<0||isNaN(t)?0:t;E(a),function(e,t){var n=D().map((function(n){return t===n.siteId?(n.timeToWalk=e,n):n}));A("sites",n)}(a,n.siteId)},timeToWalk:v}),r.a.createElement(T.a,{className:t.listTitle,variant:"h6"},"Mot stan"),r.a.createElement(I,{showCantCatch:o,timeToWalk:v,list:b.filter((function(e){return 2===P(e)}))}),r.a.createElement(T.a,{className:t.listTitle,variant:"h6"},"Mot Nacka"),r.a.createElement(I,{showCantCatch:o,timeToWalk:v,list:b.filter((function(e){return 1===P(e)}))})))},G=n(147),H=n(153),V=n(144),$=n(145),q=n(151),K=n(146),Q=n(156),X=Object(b.a)((function(e){return{root:{width:"100%"},listItem:{paddingLeft:0,paddingRight:0},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},headingIcon:{fontSize:e.typography.pxToRem(16),marginRight:e.spacing(1)}}})),Y=function(e){var t=e.timeWindow,n=e.setTimeWindow,a=e.showCantCatch,i=e.setShowCantCatch,o=X();return r.a.createElement(O,null,r.a.createElement(H.a,null,r.a.createElement(V.a,{expandIcon:r.a.createElement("i",{className:"fad fa-chevron-down"}),"aria-controls":"settings-content",id:"settings-header"},r.a.createElement(T.a,{className:o.heading},r.a.createElement("i",{className:"fad fa-cog "+o.headingIcon}),"Inst\xe4llningar")),r.a.createElement($.a,null,r.a.createElement(N.a,{className:o.root},r.a.createElement(h.a,{className:o.listItem},r.a.createElement(E.a,{secondary:"Visa avg\xe5ngar inom:"}),r.a.createElement(w.a,null,r.a.createElement(q.a,{value:t,onChange:function(e){return n(e.target.value)}},r.a.createElement(K.a,{value:"30"},"30 minuter"),r.a.createElement(K.a,{value:"60"},"60 minuter")))),r.a.createElement(h.a,{className:o.listItem},r.a.createElement(E.a,{secondary:"Visa avg\xe5ngar jag inte hinner till:"}),r.a.createElement(w.a,null,r.a.createElement(Q.a,{edge:"end",color:"primary",checked:a,onChange:function(e){return i(e.target.checked)}})))))))};var Z=function(){var e=Object(a.useState)(30),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!1),l=Object(c.a)(o,2),s=l[0],u=l[1];return r.a.createElement(G.a,{container:!0,spacing:0},r.a.createElement(G.a,{item:!0,xs:12},r.a.createElement(Y,{timeWindow:n,setTimeWindow:i,setShowCantCatch:u,showCantCatch:s})),D().map((function(e,t){return r.a.createElement(G.a,{key:t,item:!0,xs:12,md:"auto"},r.a.createElement(z,{showCantCatch:s,site:e,timeWindow:n}))})))},_=n(148),ee=n(149);var te=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null),r.a.createElement("div",{className:"App"},r.a.createElement(ee.a,{maxWidth:"lg",disableGutters:!0},r.a.createElement(Z,null))))},ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(te,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/simple-sl-client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/simple-sl-client","/service-worker.js");ne?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ae(t,e)}))}}()},76:function(e,t,n){e.exports=n(103)}},[[76,1,2]]]);
//# sourceMappingURL=main.f2e1869e.chunk.js.map